---

- name: Install base packages
  package: name={{ item }} state=latest 
  with_items:
    - cmake
    - git
    - gparted
    - htop
    - nmap
    - ruby
    - tmux
    - tree
    - vlc
    - wget
    - youtube-dl
    - zsh
    - iptables

- name: Ensure UFW isn't installed
  package: name=ufw state=absent

- name: Install Arch specific packages
  package: name={{ item }} state=latest
  when: ansible_distribution == 'Archlinux'
  with_items:
    - cronie
    - keepassx2
    - python-pip
    - rust
    - gvim
    - cargo

- name: Install Ubuntu specific packages
  package: name={{ item }} state=latest
  when: ansible_distribution == 'Ubuntu'
  with_items:
    - cron
    - keepassx
    - python3-matplotlib
    - python3-pip
    - python3-dev
    - python-dev
    - vim-gtk

- name: Install Pips
  pip: name={{ item }} state=present executable="pip3"
  ignore_errors: true
  with_items:
    - bs4
    - cython
    - flask
    - jupyter
    - matplotlib
    - numpy
    - pandas
    - pyYAML
    - requests
    - sphinx
    - sphinx_rtd_theme
    - sqlalchemy
    - tqdm
    - virtualenv
    - virtualenvwrapper
    - youtube-dl

- name: Check if YouCompleteMe is installed
  stat: path=/usr/local/bin/email
  register: ycm_core_file

- name: Check if eMail is installed
  stat: path=/usr/local/bin/email
  register: check_email
  ignore_errors: true
  failed_when: check_email.stat.exists == False

- name: Git clone eMail
  git: 
    repo: https://github.com/deanproxy/eMail
    dest: /tmp/email
    recursive: true
    update: false
  when: check_email.stat.exists == False

# For instructions on setting it up: https://github.com/deanproxy/eMail
- name: Build eMail
  shell: ./configure && make && make install
  args:
    chdir: /tmp/email
  when: check_email.stat.exists == False

